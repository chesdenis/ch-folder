@{
    ViewData["Title"] = "Ch Photo Gallery";
    var queryText = Context.Request.Query["query"].ToString();
    var selectedTags = Context.Request.Query["tags"].ToArray();
    var filters = Context.Request.Query["filters"].ToArray();
    var sorting = Context.Request.Query["sorting"].ToArray();
    
    var currentPage = int.TryParse(Context.Request.Query["page"], out var p) ? p : 1;
    var totalPages = 10; // Set this from your data/controller
}

<div class="container-fluid mt-4 px-3">
    <form method="get" action="" class="row g-3">
        <div class="col-12 col-md-10 col-lg-11">
            <textarea class="form-control"
                      name="query"
                      placeholder="Enter search text"
                      rows="3">@queryText</textarea>
        </div>
        <div class="col-12 col-md-2 col-lg-1">
            <button type="submit" class="btn btn-primary w-100">Search</button>
        </div>
        <div class="col-12">
            <div class="d-flex flex-wrap gap-2 align-items-center">
                <div class="form-check form-check-inline mb-0">
                    <input class="form-check-input" type="checkbox" name="tags" value="ASP.NET" id="tag1"
                           @(selectedTags.Contains("ASP.NET") ? "checked" : "")>
                    <label class="form-check-label badge bg-primary" for="tag1">ASP.NET</label>
                </div>
                <div class="form-check form-check-inline mb-0">
                    <input class="form-check-input" type="checkbox" name="tags" value="C#" id="tag2"
                           @(selectedTags.Contains("C#") ? "checked" : "")>
                    <label class="form-check-label badge bg-secondary" for="tag2">C#</label>
                </div>
                <div class="form-check form-check-inline mb-0">
                    <input class="form-check-input" type="checkbox" name="tags" value="JavaScript" id="tag3"
                           @(selectedTags.Contains("JavaScript") ? "checked" : "")>
                    <label class="form-check-label badge bg-success" for="tag3">JavaScript</label>
                </div>
                <div class="form-check form-check-inline mb-0">
                    <input class="form-check-input" type="checkbox" name="tags" value="CSS" id="tag4"
                           @(selectedTags.Contains("CSS") ? "checked" : "")>
                    <label class="form-check-label badge bg-info" for="tag4">CSS</label>
                </div>
                <div class="form-check form-check-inline mb-0">
                    <input class="form-check-input" type="checkbox" name="tags" value="HTML" id="tag5"
                           @(selectedTags.Contains("HTML") ? "checked" : "")>
                    <label class="form-check-label badge bg-warning" for="tag5">HTML</label>
                </div>
            </div>
        </div>
    </form>
    <div class="row">
        <div class="col-12 col-lg-3 mb-4">
            <div class="accordion" id="filtersAccordion">
                <!-- View Options Section -->
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#viewCollapse" aria-expanded="false" aria-controls="viewCollapse">
                            View Options
                        </button>
                    </h2>
                    <div id="viewCollapse" class="accordion-collapse collapse">
                        <div class="accordion-body">
                            <p class="text-muted">No view options available</p>
                        </div>
                    </div>
                </div>

                <!-- Filters Section -->
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#filtersCollapse" aria-expanded="false" aria-controls="filtersCollapse">
                            Filters
                        </button>
                    </h2>
                    <div id="filtersCollapse" class="accordion-collapse collapse">
                        <div class="accordion-body">
                            <p class="text-muted">No filters available</p>
                        </div>
                    </div>
                </div>

                <!-- Sorting Section -->
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#sortingCollapse" aria-expanded="false" aria-controls="sortingCollapse">
                            Sorting
                        </button>
                    </h2>
                    <div id="sortingCollapse" class="accordion-collapse collapse">
                        <div class="accordion-body">
                            <p class="text-muted">No sorting options available</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-12 col-lg-9">
            @await Component.InvokeAsync("Pagination", new { currentPage, totalPages })
            <div class="pswp-gallery" id="my-gallery">
                <a href="https://images.unsplash.com/photo-1581833971358-2c8b550f87b3?w=1600"
                   data-pswp-width="1600"
                   data-pswp-height="1067"
                   target="_blank">
                    <img src="https://images.unsplash.com/photo-1581833971358-2c8b550f87b3?w=300" alt="Cat 1"
                         class="img-thumbnail m-2"/>
                </a>
                <a href="https://images.unsplash.com/photo-1581833971358-2c8b550f87b3?w=1600"
                   data-pswp-width="1600"
                   data-pswp-height="1067"
                   target="_blank">
                    <img src="https://images.unsplash.com/photo-1581833971358-2c8b550f87b3?w=300" alt="Cat 1"
                         class="img-thumbnail m-2"/>
                </a>

                <a href="https://images.unsplash.com/photo-1581833971358-2c8b550f87b3?w=1600"
                   data-pswp-width="1600"
                   data-pswp-height="1067"
                   target="_blank">
                    <img src="https://images.unsplash.com/photo-1581833971358-2c8b550f87b3?w=300" alt="Cat 1"
                         class="img-thumbnail m-2"/>
                </a>

                <a href="https://images.unsplash.com/photo-1581833971358-2c8b550f87b3?w=1600"
                   data-pswp-width="1600"
                   data-pswp-height="1067"
                   target="_blank">
                    <img src="https://images.unsplash.com/photo-1581833971358-2c8b550f87b3?w=300" alt="Cat 1"
                         class="img-thumbnail m-2"/>
                </a>

                <a href="https://images.unsplash.com/photo-1581833971358-2c8b550f87b3?w=1600"
                   data-pswp-width="1600"
                   data-pswp-height="1067"
                   target="_blank">
                    <img src="https://images.unsplash.com/photo-1581833971358-2c8b550f87b3?w=300" alt="Cat 1"
                         class="img-thumbnail m-2"/>
                </a>
                <!-- more images -->
            </div>
            @await Component.InvokeAsync("Pagination", new { currentPage, totalPages })
        </div>
    </div>
</div>



@section Styles {
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@5.4.3/dist/photoswipe.css">
}

@section Scripts {
    <script type="module">
        import PhotoSwipeLightbox
            from 'https://cdn.jsdelivr.net/npm/photoswipe@5.4.3/dist/photoswipe-lightbox.esm.js';

        const lightbox = new PhotoSwipeLightbox({
            gallery: '#my-gallery',
            children: 'a',
            pswpModule: () => import('https://cdn.jsdelivr.net/npm/photoswipe@5.4.3/dist/photoswipe.esm.js')
        });

        lightbox.init();
    </script>
}

<!-- Pagination Navigator -->
@{
    
}


