@{
    var available = ViewBag.AvailableTags as HashSet<string> ?? new HashSet<string>(StringComparer.OrdinalIgnoreCase);
    var selected = ViewBag.SelectedTags as HashSet<string> ?? new HashSet<string>(StringComparer.OrdinalIgnoreCase);
}

<div class="d-flex flex-wrap gap-2 align-items-center">
    @foreach (var tag in available)
    {
        var inputId = $"tag_{tag.Replace(" ", "_")}";
        <div class="form-check form-check-inline mb-0">
            <input class="form-check-input" type="checkbox" name="tags" value="@tag" id="@inputId"
                   @(selected.Contains(tag) ? "checked" : null) />
            <label class="form-check-label badge bg-secondary" for="@inputId">@tag</label>
        </div>
    }
    @if (!available.Any())
    {
        <span class="text-muted">No tags available</span>
    }
    </div>
